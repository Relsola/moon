# 数值的扩展

## 二进制和八进制表示法

`ES6` 提供了二进制和八进制数值的新的写法，分别用前缀 `0b`（或 `0B`）和 `0o`（或 `0O`）表示。

```js
0b101; // 二进制 5

0o101; // 八进制 65

0x101; // 十六进制 257
```

::: warning 注意
从 `ES5` 开始，在严格模式之中八进制就不再允许使用前缀 `0` 表示，`ES6` 进一步明确要使用前缀 `0o` 表示。
:::

如果要将 `0b` 和 `0o` 前缀的字符串数值转为十进制，使用 `Number` 方法即可。

```js
Number('0b101'); // 5
Number('0o101'); // 65
```

## 数值分隔符

较长的数值允许每三位添加一个分隔符（通常是一个逗号），增加数值的可读性。比如，`1000` 可以写作 `1,000`。

`ES2021`，允许 `JavaScript` 的数值使用下划线（`_`）作为分隔符。

```js
// 小数
0.000_001;

// 科学计数法
1e10_000;
```

::: warning 数值分隔符使用注意点

- 不能放在数值的最前面（`leading`）或最后面（`trailing`）。
- 不能两个或两个以上的分隔符连在一起。
- 小数点的前后不能有分隔符。
- 科学计数法里面，表示指数的 `e` 或 `E` 前后不能有分隔符。

:::

## Number 对象新增方法

- `isFinite()`: 检查一个数值是否为有限的。
- `isNaN()`: 检查一个值是否为 `NaN`。
- `isInteger()`: 判断一个数值是否为整数。
- `isSafeInteger()`: 判断一个整数是否在精确范围之内。
- `EPSILON`: 常量属性，表示 1 与大于 1 的最小浮点数之间的差。
- `MAX_SAFE_INTEGER`: 常量属性，表示精确数值表示的上限。
- `MIN_SAFE_INTEGER`: 常量属性，表示精确数值表示的下限。

::: tip
`ES6` 在 `Math` 对象上新增了许多与数学相关的方法。所有这些方法都是静态方法，只能在 `Math` 对象上调用。

`ES7` 新增指数运算符 `**` 用于计算次方。

```js
2 ** 4; // 计算2的4次方
2 ** (2 ** 3); // 运算顺序，先算右边的
```

:::

## BigInt 数据类型

`ES2020` 引入了一种新的数据类型 `BigInt`（大整数），这是 `ECMAScript` 的第八种数据类型。

`BigInt` 只用来表示整数，没有位数的限制，任何位数的整数都可以精确表示。

```js
const a = 2172141653n;
const b = 15346349309n;

// BigInt 可以保持精度
a * b; // 33334444555566667777n

// 普通整数无法保持精度
Number(a) * Number(b); // 33334444555566670000
```

为了与 `Number` 类型区别，`BigInt` 类型的数据必须添加后缀 `n`。

```js
1234; // 普通整数
1234n; // BigInt

// BigInt 的运算
1n + 2n; // 3n
```

`BigInt` 同样可以使用各种进制表示，都要加上后缀 `n`。

```js
0b1101n; // 二进制
0o777n; // 八进制
0x16n; // 十六进制
```

::: warning 注意
`BigInt` 与普通整数是两种值，它们之间并不相等。

```js
42n === 42; // false
```

`BigInt` 可以使用负号（`-`），但是不能使用正号（`+`），因为会与 `asm.js` 冲突。

```js
-42n + // 正确
	42n; // 报错
```

:::
